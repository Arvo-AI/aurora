{
    email demo@aurora-ai.net
}

{$DOMAIN:localhost} {
    encode gzip
    
    # WebSocket chatbot
    handle /ws* {
        reverse_proxy chatbot:5006
    }
    
    # Flask backend auth endpoints (not handled by Next.js)
    handle /api/auth/register {
        reverse_proxy aurora-server:5080
    }
    handle /api/auth/login {
        reverse_proxy aurora-server:5080
    }
    
    # Everything else goes to frontend (Next.js handles its own /api/auth/* via NextAuth)
    handle {
        reverse_proxy frontend:3000
    }
}
